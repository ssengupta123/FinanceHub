2026-02-17T13:28:27.2214322Z Warning: connect.session() MemoryStore is not
2026-02-17T13:28:27.2216768Z designed for a production environment, as it will leak
2026-02-17T13:28:27.221682Z memory, and will not scale past a single process.
2026-02-17T13:28:27.2412539Z Migration error: TypeError: The "config.server" property is required and must be of type string.
2026-02-17T13:28:27.2417221Z     at new dA (/home/site/wwwroot/dist/index.cjs:272:290882)
2026-02-17T13:28:27.241732Z     at /home/site/wwwroot/dist/index.cjs:273:20620
2026-02-17T13:28:27.2417349Z     at new Promise (<anonymous>)
2026-02-17T13:28:27.2417403Z     at SM.acquireRawConnection (/home/site/wwwroot/dist/index.cjs:273:20476)
2026-02-17T13:28:27.2417431Z     at create (/home/site/wwwroot/dist/index.cjs:109:896)
2026-02-17T13:28:27.2417458Z     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2026-02-17T13:28:27.2732564Z Incremental migration error: TypeError: The "config.server" property is required and must be of type string.
2026-02-17T13:28:27.2732853Z     at new dA (/home/site/wwwroot/dist/index.cjs:272:290882)
2026-02-17T13:28:27.2732905Z     at /home/site/wwwroot/dist/index.cjs:273:20620
2026-02-17T13:28:27.2732932Z     at new Promise (<anonymous>)
2026-02-17T13:28:27.2732959Z     at SM.acquireRawConnection (/home/site/wwwroot/dist/index.cjs:273:20476)
2026-02-17T13:28:27.2732984Z     at create (/home/site/wwwroot/dist/index.cjs:109:896)
2026-02-17T13:28:27.2733011Z     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2026-02-17T13:28:27.2733038Z Seed error: TypeError: The "config.server" property is required and must be of type string.
2026-02-17T13:28:27.2733064Z     at new dA (/home/site/wwwroot/dist/index.cjs:272:290882)
2026-02-17T13:28:27.2733106Z     at /home/site/wwwroot/dist/index.cjs:273:20620
2026-02-17T13:28:27.2733129Z     at new Promise (<anonymous>)
2026-02-17T13:28:27.2733155Z     at SM.acquireRawConnection (/home/site/wwwroot/dist/index.cjs:273:20476)
2026-02-17T13:28:27.2733179Z     at create (/home/site/wwwroot/dist/index.cjs:109:896)
2026-02-17T13:28:27.2733205Z     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2026-02-17T13:28:27.2922413Z /home/site/wwwroot/dist/index.cjs:434
2026-02-17T13:28:27.292415Z ${E3(r)}`);return{...de,id:le,type:ye,function:{...Le,name:ke,arguments:ie}}})}}:{...O,message:{...M,content:D,role:H,refusal:m.refusal??null},finish_reason:g,index:v,logprobs:C}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return Hje(p,e)}function E3(r){return JSON.stringify(r)}var GA=class r extends cm{static fromReadableStream(e){let t=new r(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,n){let i=new r(t),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,s)),i}};var Lf=class extends Xe{constructor(){super(...arguments),this.messages=new am(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(je`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(je`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return this._client.getAPIList("/chat/completions",Ar,{query:e,...t})}delete(e,t){return this._client.delete(je`/chat/completions/${e}`,t)}parse(e,t){return Wje(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(n=>$A(n,e))}runTools(e,t){return e.stream?GA.runTools(this._client,e,t):YA.runTools(this._client,e,t)}stream(e,t){return cm.createChatCompletion(this._client,e,t)}};Lf.Messages=am;var Dp=class extends Xe{constructor(){super(...arguments),this.completions=new Lf(this._client)}};Dp.Completions=Lf;var Jje=Symbol("brand.privateNullableHeaders");function*txr(r){if(!r)return;if(Jje in r){let{values:n,nulls:i}=r;yield*n.entries();for(let s of i)yield[s,null];return}let e=!1,t;r instanceof Headers?t=r.entries():bX(r)?t=r:(e=!0,t=Object.entries(r??{}));for(let n of t){let i=n[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");let s=bX(n[1])?n[1]:[n[1]],o=!1;for(let l of s)l!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,l])}}var yt=r=>{let e=new Headers,t=new Set;for(let n of r){let i=new Set;for(let[s,o]of txr(n)){let l=s.toLowerCase();i.has(l)||(e.delete(s),i.add(l)),o===null?(e.delete(s),t.add(l)):(e.append(s,o),t.delete(l))}}return{[Jje]:!0,values:e,nulls:t}};var Ex=class extends Xe{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:yt([{Accept:"application/octet-stream"},t?.headers]),__binaryResponse:!0})}};var Tx=class extends Xe{create(e,t){return this._client.post("/audio/transcriptions",Au({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}};var Cx=class extends Xe{create(e,t){return this._client.post("/audio/translations",Au({body:e,...t,__metadata:{model:e.model}},this._client))}};var Il=class extends Xe{constructor(){super(...arguments),this.transcriptions=new Tx(this._client),this.translations=new Cx(this._client),this.speech=new Ex(this._client)}};Il.Transcriptions=Tx;Il.Translations=Cx;Il.Speech=Ex;var um=class extends Xe{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(je`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",Ar,{query:e,...t})}cancel(e,t){return this._client.post(je`/batches/${e}/cancel`,t)}};var Ax=class extends Xe{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(je`/assistants/${e}`,{...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(je`/assistants/${e}`,{body:t,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},t){return this._client.getAPIList("/assistants",Ar,{query:e,...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(je`/assistants/${e}`,{...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}};var Sx=class extends Xe{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}};var Ix=class extends Xe{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}};var Mp=class extends Xe{constructor(){super(...arguments),this.sessions=new Sx(this._client),this.transcriptionSessions=new Ix(this._client)}};Mp.Sessions=Sx;Mp.TranscriptionSessions=Ix;var Ox=class extends Xe{create(e,t){return this._client.post("/chatkit/sessions",{body:e,...t,headers:yt([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}cancel(e,t){return this._client.post(je`/chatkit/sessions/${e}/cancel`,{...t,headers:yt([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}};var Rx=class extends Xe{retrieve(e,t){return this._client.get(je`/chatkit/threads/${e}`,{...t,headers:yt([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}list(e={},t){return this._client.getAPIList("/chatkit/threads",Nf,{query:e,...t,headers:yt([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}delete(e,t){return this._client.delete(je`/chatkit/threads/${e}`,{...t,headers:yt([{"OpenAI-Beta":"chatkit_beta=v1"},t?.headers])})}listItems(e,t={},n){return this._client.getAPIList(je`/chatkit/threads/${e}/items`,Nf,{query:t,...n,headers:yt([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}};var Lp=class extends Xe{constructor(){super(...arguments),this.sessions=new Ox(this._client),this.threads=new Rx(this._client)}};Lp.Sessions=Ox;Lp.Threads=Rx;var kx=class extends Xe{create(e,t,n){return this._client.post(je`/threads/${e}/messages`,{body:t,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){let{thread_id:i}=t;return this._client.get(je`/threads/${i}/messages/${e}`,{...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){let{thread_id:i,...s}=t;return this._client.post(je`/threads/${i}/messages/${e}`,{body:s,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(je`/threads/${e}/messages`,Ar,{query:t,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t,n){let{thread_id:i}=t;return this._client.delete(je`/threads/${i}/messages/${e}`,{...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};var Px=class extends Xe{retrieve(e,t,n){let{thread_id:i,run_id:s,...o}=t;return this._client.get(je`/threads/${i}/runs/${s}/steps/${e}`,{query:o,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t,n){let{thread_id:i,...s}=t;return this._client.getAPIList(je`/threads/${i}/runs/${e}/steps`,Ar,{query:s,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};var Zje=r=>{if(typeof Buffer<"u"){let e=Buffer.from(r,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{let e=atob(r),t=e.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=e.charCodeAt(i);return Array.from(new Float32Array(n.buffer))}};var qp=r=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[r]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(r)?.trim()};var Zs,fm,eJ,Ol,T3,Su,dm,Nx,lm,S3,sc,C3,A3,XA,KA,QA,e7e,t7e,r7e,n7e,i7e,s7e,a7e,qf=class extends Np{constructor(){super(...arguments),Zs.add(this),eJ.set(this,[]),Ol.set(this,{}),T3.set(this,{}),Su.set(this,void 0),dm.set(this,void 0),Nx.set(this,void 0),lm.set(this,void 0),S3.set(this,void 0),sc.set(this,void 0),C3.set(this,void 0),A3.set(this,void 0),XA.set(this,void 0)}[(eJ=new WeakMap,Ol=new WeakMap,T3=new WeakMap,Su=new WeakMap,dm=new WeakMap,Nx=new WeakMap,lm=new WeakMap,S3=new WeakMap,sc=new WeakMap,C3=new WeakMap,A3=new WeakMap,XA=new WeakMap,Zs=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on("event",i=>{let s=t.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{n=!0;for(let s of t)s.reject(i);t.length=0}),this.on("error",i=>{n=!0;for(let s of t)s.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,o)=>t.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let t=new fm;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){let n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();let i=Al.fromReadableStream(e,this.controller);for await(let s of i)Ie(this,Zs,"m",KA).call(this,s);if(i.controller.signal?.aborted)throw new Xi;return this._addRun(Ie(this,Zs,"m",QA).call(this))}toReadableStream(){return new Al(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,i){let s=new fm;return s._run(()=>s._runToolAssistantStream(e,t,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,t,n,i){let s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let o={...n,stream:!0},l=await e.submitToolOutputs(t,o,{...i,signal:this.controller.signal});this._connected();for await(let p of l)Ie(this,Zs,"m",KA).call(this,p);if(l.controller.signal?.aborted)throw new Xi;return this._addRun(Ie(this,Zs,"m",QA).call(this))}static createThreadAssistantStream(e,t,n){let i=new fm;return i._run(()=>i._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,n,i){let s=new fm;return s._run(()=>s._runAssistantStream(e,t,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return Ie(this,C3,"f")}currentRun(){return Ie(this,A3,"f")}currentMessageSnapshot(){return Ie(this,Su,"f")}currentRunStepSnapshot(){return Ie(this,XA,"f")}async finalRunSteps(){return await this.done(),Object.values(Ie(this,Ol,"f"))}async finalMessages(){return await this.done(),Object.values(Ie(this,T3,"f"))}async finalRun(){if(await this.done(),!Ie(this,dm,"f"))throw Error("Final run was not received.");return Ie(this,dm,"f")}async _createThreadAssistantStream(e,t,n){let i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let s={...t,stream:!0},o=await e.createAndRun(s,{...n,signal:this.controller.signal});this._connected();for await(let l of o)Ie(this,Zs,"m",KA).call(this,l);if(o.controller.signal?.aborted)throw new Xi;return this._addRun(Ie(this,Zs,"m",QA).call(this))}async _createAssistantStream(e,t,n,i){let s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let o={...n,stream:!0},l=await e.create(t,o,{...i,signal:this.controller.signal});this._connected();for await(let p of l)Ie(this,Zs,"m",KA).call(this,p);if(l.controller.signal?.aborted)throw new Xi;return this._addRun(Ie(this,Zs,"m",QA).call(this))}static accumulateDelta(e,t){for(let[n,i]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=i;continue}let s=e[n];if(s==null){e[n]=i;continue}if(n==="index"||n==="type"){e[n]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(NA(s)&&NA(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(let o of i){if(!NA(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);let l=o.index;if(l==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);let p=s[l];p==null?s.push(o):s[l]=this.accumulateDelta(p,o)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${i}, accValue: ${s}`);e[n]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,i){return await this._createAssistantStream(t,e,n,i)}async _runToolAssistantStream(e,t,n,i){return await this._createToolAssistantStream(t,e,n,i)}};fm=qf,KA=function(e){if(!this.ended)switch(sr(this,C3,e,"f"),Ie(this,Zs,"m",r7e).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Ie(this,Zs,"m",a7e).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ie(this,Zs,"m",t7e).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Ie(this,Zs,"m",e7e).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},QA=function(){if(this.ended)throw new qt("stream has ended, this shouldn't happen");if(!Ie(this,dm,"f"))throw Error("Final run has not been received");return Ie(this,dm,"f")},e7e=function(e){let[t,n]=Ie(this,Zs,"m",i7e).call(this,e,Ie(this,Su,"f"));sr(this,Su,t,"f"),Ie(this,T3,"f")[t.id]=t;for(let i of n){let s=t.content[i.index];s?.type=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(let i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=t.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Ie(this,Nx,"f")){if(Ie(this,lm,"f"))switch(Ie(this,lm,"f").type){case"text":this._emit("textDone",Ie(this,lm,"f").text,Ie(this,Su,"f"));break;case"image_file":this._emit("imageFileDone",Ie(this,lm,"f").image_file,Ie(this,Su,"f"));break}sr(this,Nx,i.index,"f")}sr(this,lm,t.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Ie(this,Nx,"f")!==void 0){let i=e.data.content[Ie(this,Nx,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Ie(this,Su,"f"));break;case"text":this._emit("textDone",i.text,Ie(this,Su,"f"));break}}Ie(this,Su,"f")&&this._emit("messageDone",e.data),sr(this,Su,void 0,"f")}},t7e=function(e){let t=Ie(this,Zs,"m",n7e).call(this,e);switch(sr(this,XA,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&t.step_details.type=="tool_calls")for(let s of n.step_details.tool_calls)s.index==Ie(this,S3,"f")?this._emit("toolCallDelta",s,t.step_details.tool_calls[s.index]):(Ie(this,sc,"f")&&this._emit("toolCallDone",Ie(this,sc,"f")),sr(this,S3,s.index,"f"),sr(this,sc,t.step_details.tool_calls[s.index],"f"),Ie(this,sc,"f")&&this._emit("toolCallCreated",Ie(this,sc,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":sr(this,XA,void 0,"f"),e.data.step_details.type=="tool_calls"&&Ie(this,sc,"f")&&(this._emit("toolCallDone",Ie(this,sc,"f")),sr(this,sc,void 0,"f")),this._emit("runStepDone",e.data,t);break;case"thread.run.step.in_progress":break}},r7e=function(e){Ie(this,eJ,"f").push(e),this._emit("event",e)},n7e=function(e){switch(e.event){case"thread.run.step.created":return Ie(this,Ol,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Ie(this,Ol,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){let i=fm.accumulateDelta(t,n.delta);Ie(this,Ol,"f")[e.data.id]=i}return Ie(this,Ol,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress
2026-02-17T13:28:27.2925207Z ":Ie(this,Ol,"f")[e.data.id]=e.data;break}if(Ie(this,Ol,"f")[e.data.id])return Ie(this,Ol,"f")[e.data.id];throw new Error("No snapshot available")},i7e=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(let s of i.delta.content)if(s.index in t.content){let o=t.content[s.index];t.content[s.index]=Ie(this,Zs,"m",s7e).call(this,s,o)}else t.content[s.index]=s,n.push(s);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},s7e=function(e,t){return fm.accumulateDelta(t,e)},a7e=function(e){switch(sr(this,A3,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":sr(this,dm,e.data,"f"),Ie(this,sc,"f")&&(this._emit("toolCallDone",Ie(this,sc,"f")),sr(this,sc,void 0,"f"));break;case"thread.run.cancelling":break}};var pm=class extends Xe{constructor(){super(...arguments),this.steps=new Px(this._client)}create(e,t,n){let{include:i,...s}=t;return this._client.post(je`/threads/${e}/runs`,{query:{include:i},body:s,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}retrieve(e,t,n){let{thread_id:i}=t;return this._client.get(je`/threads/${i}/runs/${e}`,{...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){let{thread_id:i,...s}=t;return this._client.post(je`/threads/${i}/runs/${e}`,{body:s,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(je`/threads/${e}/runs`,Ar,{query:t,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,t,n){let{thread_id:i}=t;return this._client.post(je`/threads/${i}/runs/${e}/cancel`,{...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){let i=await this.create(e,t,n);return await this.poll(i.id,{thread_id:e},n)}createAndStream(e,t,n){return qf.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){let i=yt([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:s,response:o}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(n?.pollIntervalMs)l=n.pollIntervalMs;else{let p=o.headers.get("openai-poll-after-ms");if(p){let m=parseInt(p);isNaN(m)||(l=m)}}await Tl(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,t,n){return qf.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n){let{thread_id:i,...s}=t;return this._client.post(je`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,n){let i=await this.submitToolOutputs(e,t,n);return await this.poll(i.id,t,n)}submitToolOutputsStream(e,t,n){return qf.createToolAssistantStream(e,this._client.beta.threads.runs,t,n)}};pm.Steps=Px;var Up=class extends Xe{constructor(){super(...arguments),this.runs=new pm(this._client),this.messages=new kx(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(je`/threads/${e}`,{...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(je`/threads/${e}`,{body:t,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t){return this._client.delete(je`/threads/${e}`,{...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){let n=await this.createAndRun(e,t);return await this.runs.poll(n.id,{thread_id:n.thread_id},t)}createAndRunStream(e,t){return qf.createThreadAssistantStream(e,this._client.beta.threads,t)}};Up.Runs=pm;Up.Messages=kx;var Iu=class extends Xe{constructor(){super(...arguments),this.realtime=new Mp(this._client),this.chatkit=new Lp(this._client),this.assistants=new Ax(this._client),this.threads=new Up(this._client)}};Iu.Realtime=Mp;Iu.ChatKit=Lp;Iu.Assistants=Ax;Iu.Threads=Up;var hm=class extends Xe{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}};var Fx=class extends Xe{retrieve(e,t,n){let{container_id:i}=t;return this._client.get(je`/containers/${i}/files/${e}/content`,{...n,headers:yt([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}};var mm=class extends Xe{constructor(){super(...arguments),this.content=new Fx(this._client)}create(e,t,n){return this._client.post(je`/containers/${e}/files`,Ff({body:t,...n},this._client))}retrieve(e,t,n){let{container_id:i}=t;return this._client.get(je`/containers/${i}/files/${e}`,n)}list(e,t={},n){return this._client.getAPIList(je`/containers/${e}/files`,Ar,{query:t,...n})}delete(e,t,n){let{container_id:i}=t;return this._client.delete(je`/containers/${i}/files/${e}`,{...n,headers:yt([{Accept:"*/*"},n?.headers])})}};mm.Content=Fx;var Bp=class extends Xe{constructor(){super(...arguments),this.files=new mm(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(je`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",Ar,{query:e,...t})}delete(e,t){return this._client.delete(je`/containers/${e}`,{...t,headers:yt([{Accept:"*/*"},t?.headers])})}};Bp.Files=mm;var Dx=class extends Xe{create(e,t,n){let{include:i,...s}=t;return this._client.post(je`/conversations/${e}/items`,{query:{include:i},body:s,...n})}retrieve(e,t,n){let{conversation_id:i,...s}=t;return this._client.get(je`/conversations/${i}/items/${e}`,{query:s,...n})}list(e,t={},n){return this._client.getAPIList(je`/conversations/${e}/items`,Nf,{query:t,...n})}delete(e,t,n){let{conversation_id:i}=t;return this._client.delete(je`/conversations/${i}/items/${e}`,n)}};var jp=class extends Xe{constructor(){super(...arguments),this.items=new Dx(this._client)}create(e={},t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(je`/conversations/${e}`,t)}update(e,t,n){return this._client.post(je`/conversations/${e}`,{body:t,...n})}delete(e,t){return this._client.delete(je`/conversations/${e}`,t)}};jp.Items=Dx;var gm=class extends Xe{create(e,t){let n=!!e.encoding_format,i=n?e.encoding_format:"base64";n&&Vi(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);let s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return n?s:(Vi(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(l=>{let p=l.embedding;l.embedding=Zje(p)}),o)))}};var Mx=class extends Xe{retrieve(e,t,n){let{eval_id:i,run_id:s}=t;return this._client.get(je`/evals/${i}/runs/${s}/output_items/${e}`,n)}list(e,t,n){let{eval_id:i,...s}=t;return this._client.getAPIList(je`/evals/${i}/runs/${e}/output_items`,Ar,{query:s,...n})}};var ym=class extends Xe{constructor(){super(...arguments),this.outputItems=new Mx(this._client)}create(e,t,n){return this._client.post(je`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){let{eval_id:i}=t;return this._client.get(je`/evals/${i}/runs/${e}`,n)}list(e,t={},n){return this._client.getAPIList(je`/evals/${e}/runs`,Ar,{query:t,...n})}delete(e,t,n){let{eval_id:i}=t;return this._client.delete(je`/evals/${i}/runs/${e}`,n)}cancel(e,t,n){let{eval_id:i}=t;return this._client.post(je`/evals/${i}/runs/${e}`,n)}};ym.OutputItems=Mx;var $p=class extends Xe{constructor(){super(...arguments),this.runs=new ym(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(je`/evals/${e}`,t)}update(e,t,n){return this._client.post(je`/evals/${e}`,{body:t,...n})}list(e={},t){return this._client.getAPIList("/evals",Ar,{query:e,...t})}delete(e,t){return this._client.delete(je`/evals/${e}`,t)}};$p.Runs=ym;var _m=class extends Xe{create(e,t){return this._client.post("/files",Au({body:e,...t},this._client))}retrieve(e,t){return this._client.get(je`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",Ar,{query:e,...t})}delete(e,t){return this._client.delete(je`/files/${e}`,t)}content(e,t){return this._client.get(je`/files/${e}/content`,{...t,headers:yt([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=1800*1e3}={}){let i=new Set(["processed","error","deleted"]),s=Date.now(),o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Tl(t),o=await this.retrieve(e),Date.now()-s>n)throw new kp({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}};var Lx=class extends Xe{};var qx=class extends Xe{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};var vm=class extends Xe{constructor(){super(...arguments),this.graders=new qx(this._client)}};vm.Graders=qx;var Ux=class extends Xe{create(e,t,n){return this._client.getAPIList(je`/fine_tuning/checkpoints/${e}/permissions`,Sl,{body:t,method:"post",...n})}retrieve(e,t={},n){return this._client.get(je`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}delete(e,t,n){let{fine_tuned_model_checkpoint:i}=t;return this._client.delete(je`/fine_tuning/checkpoints/${i}/permissions/${e}`,n)}};var xm=class extends Xe{constructor(){super(...arguments),this.permissions=new Ux(this._client)}};xm.Permissions=Ux;var Bx=class extends Xe{list(e,t={},n){return this._client.getAPIList(je`/fine_tuning/jobs/${e}/checkpoints`,Ar,{query:t,...n})}};var bm=class extends Xe{constructor(){super(...arguments),this.checkpoints=new Bx(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(je`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",Ar,{query:e,...t})}cancel(e,t){return this._client.post(je`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return this._client.getAPIList(je`/fine_tuning/jobs/${e}/events`,Ar,{query:t,...n})}pause(e,t){return this._client.post(je`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(je`/fine_tuning/jobs/${e}/resume`,t)}};bm.Checkpoints=Bx;var Ou=class extends Xe{constructor(){super(...arguments),this.methods=new Lx(this._client),this.jobs=new bm(this._client),this.checkpoints=new xm(this._client),this.alpha=new vm(this._client)}};Ou.Methods=Lx;Ou.Jobs=bm;Ou.Checkpoints=xm;Ou.Alpha=vm;var jx=class extends Xe{};var Hp=class extends Xe{constructor(){super(...arguments),this.graderModels=new jx(this._client)}};Hp.GraderModels=jx;var wm=class extends Xe{createVariation(e,t){return this._client.post("/images/variations",Au({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",Au({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}};var Em=class extends Xe{retrieve(e,t){return this._client.get(je`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Sl,e)}delete(e,t){return this._client.delete(je`/models/${e}`,t)}};var Tm=class extends Xe{create(e,t){return this._client.post("/moderations",{body:e,...t})}};var $x=class extends Xe{accept(e,t,n){return this._client.post(je`/realtime/calls/${e}/accept`,{body:t,...n,headers:yt([{Accept:"*/*"},n?.headers])})}hangup(e,t){return this._client.post(je`/realtime/calls/${e}/hangup`,{...t,headers:yt([{Accept:"*/*"},t?.headers])})}refer(e,t,n){return this._client.post(je`/realtime/calls/${e}/refer`,{body:t,...n,headers:yt([{Accept:"*/*"},n?.headers])})}reject(e,t={},n){return this._client.post(je`/realtime/calls/${e}/reject`,{body:t,...n,headers:yt([{Accept:"*/*"},n?.headers])})}};var Hx=class extends Xe{create(e,t){return this._client.post("/realtime/client_secrets",{body:e,...t})}};var Uf=class extends Xe{constructor(){super(...arguments),this.clientSecrets=new Hx(this._client),this.calls=new $x(this._client)}};Uf.ClientSecrets=Hx;Uf.Calls=$x;function o7e(r,e){return!e||!Pxr(e)?{...r,output_parsed:null,output:r.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(n=>({...n,parsed:null}))}:t)}:tJ(r,e)}function tJ(r,e){let t=r.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:Dxr(e,i)};if(i.type==="message"){let s=i.content.map(o=>o.type==="output_text"?{...o,parsed:kxr(e,o.text)}:o);return{...i,content:s}}return i}),n=Object.assign({},r,{output:t});return Object.getOwnPropertyDescriptor(r,"output_text")||I3(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(let i of n.output)if(i.type==="message"){for(let s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),n}function kxr(r,e){return r.text?.format?.type!=="json_schema"?null:"$parseRaw"in r.text?.format?(r.text?.format).$parseRaw(e):JSON.parse(e)}function Pxr(r){return!!jA(r.text?.format)}function Nxr(r){return r?.$brand==="auto-parseable-tool"}function Fxr(r,e){return r.find(t=>t.type==="function"&&t.name===e)}function Dxr(r,e){let t=Fxr(r.tools??[],e.name);return{...e,...e,parsed_arguments:Nxr(t)?t.$parseRaw(e.arguments):t?.strict?JSON.parse(e.arguments):null}}function I3(r){let e=[];for(let t of r.output)if(t.type==="message")for(let n of t.content)n.type==="output_text"&&e.push(n.text);r.output_text=e.join("")}var Vx,O3,Vp,R3,c7e,u7e,l7e,f7e,k3=class r extends Np{constructor(e){super(),Vx.add(this),O3.set(this,void 0),Vp.set(this,void 0),R3.set(this,void 0),sr(this,O3,e,"f")}static createResponse(e,t,n){let i=new r(t);return i._run(()=>i._createOrRetrieveResponse(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,t,n){let i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ie(this,Vx,"m",c7e).call(this);let s,o=null;"response_id"in t?(s=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),o=t.starting_after??null):s=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(let l of s)Ie(this,Vx,"m",u7e).call(this,l,o);if(s.controller.signal?.aborted)throw new Xi;return Ie(this,Vx,"m",l7e).call(this)}[(O3=new WeakMap,Vp=new WeakMap,R3=new WeakMap,Vx=new WeakSet,c7e=function(){this.ended||sr(this,Vp,void 0,"f")},u7e=function(t,n){if(this.ended)return;let i=(o,l)=>{(n==null||l.sequence_number>n)&&this._emit(o,l)},s=Ie(this,Vx,"m",f7e).call(this,t);switch(i("event",t),t.type){case"response.output_text.delta":{let o=s.output[t.output_index];if(!o)throw new qt(`missing output at index ${t.output_index}`);if(o.type==="message"){let l=o.content[t.content_index];if(!l)throw new qt(`missing content at index ${t.content_index}`);if(l.type!=="output_text")throw new qt(`expected content to be 'output_text', got ${l.type}`);i("response.output_text.delta",{...t,snapshot:l.text})}break}case"response.function_call_arguments.delta":{let o=s.output[t.output_index];if(!o)throw new qt(`missing output at index ${t.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...t,snapshot:o.arguments});break}default:i(t.type,t);break}},l7e=function(){if(this.ended)throw new qt("stream has ended, this shouldn't happen");let t=Ie(this,Vp,"f");if(!t)throw new qt("request ended without sending any events");sr(this,Vp,void 0,"f");let n=Mxr(t,Ie(this,O3,"f"));return sr(this,R3,n,"f"),n},f7e=function(t){let n=Ie(this,Vp,"
2026-02-17T13:28:27.2926098Z f");if(!n){if(t.type!=="response.created")throw new qt(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return n=sr(this,Vp,t.response,"f"),n}switch(t.type){case"response.output_item.added":{n.output.push(t.item);break}case"response.content_part.added":{let i=n.output[t.output_index];if(!i)throw new qt(`missing output at index ${t.output_index}`);let s=i.type,o=t.part;s==="message"&&o.type!=="reasoning_text"?i.content.push(o):s==="reasoning"&&o.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(o));break}case"response.output_text.delta":{let i=n.output[t.output_index];if(!i)throw new qt(`missing output at index ${t.output_index}`);if(i.type==="message"){let s=i.content[t.content_index];if(!s)throw new qt(`missing content at index ${t.content_index}`);if(s.type!=="output_text")throw new qt(`expected content to be 'output_text', got ${s.type}`);s.text+=t.delta}break}case"response.function_call_arguments.delta":{let i=n.output[t.output_index];if(!i)throw new qt(`missing output at index ${t.output_index}`);i.type==="function_call"&&(i.arguments+=t.delta);break}case"response.reasoning_text.delta":{let i=n.output[t.output_index];if(!i)throw new qt(`missing output at index ${t.output_index}`);if(i.type==="reasoning"){let s=i.content?.[t.content_index];if(!s)throw new qt(`missing content at index ${t.content_index}`);if(s.type!=="reasoning_text")throw new qt(`expected content to be 'reasoning_text', got ${s.type}`);s.text+=t.delta}break}case"response.completed":{sr(this,Vp,t.response,"f");break}}return n},Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on("event",i=>{let s=t.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{n=!0;for(let s of t)s.reject(i);t.length=0}),this.on("error",i=>{n=!0;for(let s of t)s.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,o)=>t.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=Ie(this,R3,"f");if(!e)throw new qt("stream ended without producing a ChatCompletion");return e}};function Mxr(r,e){return o7e(r,e)}var zx=class extends Xe{list(e,t={},n){return this._client.getAPIList(je`/responses/${e}/input_items`,Ar,{query:t,...n})}};var Wx=class extends Xe{count(e={},t){return this._client.post("/responses/input_tokens",{body:e,...t})}};var Bf=class extends Xe{constructor(){super(...arguments),this.inputItems=new zx(this._client),this.inputTokens=new Wx(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&I3(n),n))}retrieve(e,t={},n){return this._client.get(je`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&I3(i),i))}delete(e,t){return this._client.delete(je`/responses/${e}`,{...t,headers:yt([{Accept:"*/*"},t?.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(n=>tJ(n,e))}stream(e,t){return k3.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(je`/responses/${e}/cancel`,t)}compact(e,t){return this._client.post("/responses/compact",{body:e,...t})}};Bf.InputItems=zx;Bf.InputTokens=Wx;var Yx=class extends Xe{retrieve(e,t){return this._client.get(je`/skills/${e}/content`,{...t,headers:yt([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0})}};var Gx=class extends Xe{retrieve(e,t,n){let{skill_id:i}=t;return this._client.get(je`/skills/${i}/versions/${e}/content`,{...n,headers:yt([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}};var Cm=class extends Xe{constructor(){super(...arguments),this.content=new Gx(this._client)}create(e,t={},n){return this._client.post(je`/skills/${e}/versions`,Ff({body:t,...n},this._client))}retrieve(e,t,n){let{skill_id:i}=t;return this._client.get(je`/skills/${i}/versions/${e}`,n)}list(e,t={},n){return this._client.getAPIList(je`/skills/${e}/versions`,Ar,{query:t,...n})}delete(e,t,n){let{skill_id:i}=t;return this._client.delete(je`/skills/${i}/versions/${e}`,n)}};Cm.Content=Gx;var jf=class extends Xe{constructor(){super(...arguments),this.content=new Yx(this._client),this.versions=new Cm(this._client)}create(e={},t){return this._client.post("/skills",Ff({body:e,...t},this._client))}retrieve(e,t){return this._client.get(je`/skills/${e}`,t)}update(e,t,n){return this._client.post(je`/skills/${e}`,{body:t,...n})}list(e={},t){return this._client.getAPIList("/skills",Ar,{query:e,...t})}delete(e,t){return this._client.delete(je`/skills/${e}`,t)}};jf.Content=Yx;jf.Versions=Cm;var Kx=class extends Xe{create(e,t,n){return this._client.post(je`/uploads/${e}/parts`,Au({body:t,...n},this._client))}};var zp=class extends Xe{constructor(){super(...arguments),this.parts=new Kx(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(je`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(je`/uploads/${e}/complete`,{body:t,...n})}};zp.Parts=Kx;var d7e=async r=>{let e=await Promise.allSettled(r),t=e.filter(i=>i.status==="rejected");if(t.length){for(let i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}let n=[];for(let i of e)i.status==="fulfilled"&&n.push(i.value);return n};var Qx=class extends Xe{create(e,t,n){return this._client.post(je`/vector_stores/${e}/file_batches`,{body:t,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){let{vector_store_id:i}=t;return this._client.get(je`/vector_stores/${i}/file_batches/${e}`,{...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,t,n){let{vector_store_id:i}=t;return this._client.post(je`/vector_stores/${i}/file_batches/${e}/cancel`,{...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){let i=await this.create(e,t);return await this.poll(e,i.id,n)}listFiles(e,t,n){let{vector_store_id:i,...s}=t;return this._client.getAPIList(je`/vector_stores/${i}/file_batches/${e}/files`,Ar,{query:s,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async poll(e,t,n){let i=yt([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:s,response:o}=await this.retrieve(t,{vector_store_id:e},{...n,headers:i}).withResponse();switch(s.status){case"in_progress":let l=5e3;if(n?.pollIntervalMs)l=n.pollIntervalMs;else{let p=o.headers.get("openai-poll-after-ms");if(p){let m=parseInt(p);isNaN(m)||(l=m)}}await Tl(l);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},i){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let s=i?.maxConcurrency??5,o=Math.min(s,t.length),l=this._client,p=t.values(),m=[...n];async function g(C){for(let O of C){let D=await l.files.create({file:O,purpose:"assistants"},i);m.push(D.id)}}let v=Array(o).fill(p).map(g);return await d7e(v),await this.createAndPoll(e,{file_ids:m})}};var Xx=class extends Xe{create(e,t,n){return this._client.post(je`/vector_stores/${e}/files`,{body:t,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,t,n){let{vector_store_id:i}=t;return this._client.get(je`/vector_stores/${i}/files/${e}`,{...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,t,n){let{vector_store_id:i,...s}=t;return this._client.post(je`/vector_stores/${i}/files/${e}`,{body:s,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,t={},n){return this._client.getAPIList(je`/vector_stores/${e}/files`,Ar,{query:t,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,t,n){let{vector_store_id:i}=t;return this._client.delete(je`/vector_stores/${i}/files/${e}`,{...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,t,n){let i=await this.create(e,t,n);return await this.poll(e,i.id,n)}async poll(e,t,n){let i=yt([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){let s=await this.retrieve(t,{vector_store_id:e},{...n,headers:i}).withResponse(),o=s.data;switch(o.status){case"in_progress":let l=5e3;if(n?.pollIntervalMs)l=n.pollIntervalMs;else{let p=s.response.headers.get("openai-poll-after-ms");if(p){let m=parseInt(p);isNaN(m)||(l=m)}}await Tl(l);break;case"failed":case"completed":return o}}}async upload(e,t,n){let i=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:i.id},n)}async uploadAndPoll(e,t,n){let i=await this.upload(e,t,n);return await this.poll(e,i.id,n)}content(e,t,n){let{vector_store_id:i}=t;return this._client.getAPIList(je`/vector_stores/${i}/files/${e}/content`,Sl,{...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};var $f=class extends Xe{constructor(){super(...arguments),this.files=new Xx(this._client),this.fileBatches=new Qx(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(je`/vector_stores/${e}`,{...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,n){return this._client.post(je`/vector_stores/${e}`,{body:t,...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",Ar,{query:e,...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(je`/vector_stores/${e}`,{...t,headers:yt([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}search(e,t,n){return this._client.getAPIList(je`/vector_stores/${e}/search`,Sl,{body:t,method:"post",...n,headers:yt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};$f.Files=Xx;$f.FileBatches=Qx;var Am=class extends Xe{create(e,t){return this._client.post("/videos",Ff({body:e,...t},this._client))}retrieve(e,t){return this._client.get(je`/videos/${e}`,t)}list(e={},t){return this._client.getAPIList("/videos",Nf,{query:e,...t})}delete(e,t){return this._client.delete(je`/videos/${e}`,t)}downloadContent(e,t={},n){return this._client.get(je`/videos/${e}/content`,{query:t,...n,headers:yt([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}remix(e,t,n){return this._client.post(je`/videos/${e}/remix`,Ff({body:t,...n},this._client))}};var Jx,p7e,P3,Sm=class extends Xe{constructor(){super(...arguments),Jx.add(this)}async unwrap(e,t,n=this._client.webhookSecret,i=300){return await this.verifySignature(e,t,n,i),JSON.parse(e)}async verifySignature(e,t,n=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");Ie(this,Jx,"m",p7e).call(this,n);let s=yt([t]).values,o=Ie(this,Jx,"m",P3).call(this,s,"webhook-signature"),l=Ie(this,Jx,"m",P3).call(this,s,"webhook-timestamp"),p=Ie(this,Jx,"m",P3).call(this,s,"webhook-id"),m=parseInt(l,10);if(isNaN(m))throw new El("Invalid webhook timestamp format");let g=Math.floor(Date.now()/1e3);if(g-m>i)throw new El("Webhook timestamp is too old");if(m>g+i)throw new El("Webhook timestamp is too new");let v=o.split(" ").map(S=>S.startsWith("v1,")?S.substring(3):S),C=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),O=p?`${p}.${l}.${e}`:`${l}.${e}`,D=await crypto.subtle.importKey("raw",C,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let S of v)try{let L=Buffer.from(S,"base64");if(await crypto.subtle.verify("HMAC",D,L,new TextEncoder().encode(O)))return}catch{continue}throw new El("The given webhook signature does not match the expected signature")}};Jx=new WeakSet,p7e=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},P3=function(e,t){if(!e)throw new Error("Headers are required");let n=e.get(t);if(n==null)throw new Error(`Missing required header: ${t}`);return n};var rJ,nJ,N3,h7e,_r=class{constructor({baseURL:e=qp("OPENAI_BASE_URL"),apiKey:t=qp("OPENAI_API_KEY"),organization:n=qp("OPENAI_ORG_ID")??null,project:i=qp("OPENAI_PROJECT_ID")??null,webhookSecret:s=qp("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(rJ.add(this),N3.set(this,void 0),this.completions=new hm(this),this.chat=new Dp(this),this.embeddings=new gm(this),this.files=new _m(this),this.images=new wm(this),this.audio=new Il(this),this.moderations=new Tm(this),this.models=new Em(this),this.fineTuning=new Ou(this),this.graders=new Hp(this),this.vectorStores=new $f(this),this.webhooks=new Sm(this),this.beta=new Iu(this),this.batches=new um(this),this.uploads=new zp(this),this.responses=new Bf(this),this.realtime=new Uf(this),this.conversations=new jp(this),this.evals=new $p(this),this.containers=new Bp(this),this.skills=new jf(this),this.videos=new Am(this),t===void 0)throw new qt("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");let l={apiKey:t,organization:n,project:i,webhookSecret:s,...o,baseURL:e||"https://api.openai.com/v1"};if(!l.dangerouslyAllowBrowser&&bje())throw new qt(`It looks like you're running in a browser-like environment.
2026-02-17T13:28:27.2926306Z
2026-02-17T13:28:27.2926409Z
2026-02-17T13:28:27.2926444Z qt [Error]: Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.
2026-02-17T13:28:27.2926472Z     at new _r (/home/site/wwwroot/dist/index.cjs:434:46060)
2026-02-17T13:28:27.2926514Z     at s$e (/home/site/wwwroot/dist/index.cjs:443:89997)
2026-02-17T13:28:27.2926541Z     at /home/site/wwwroot/dist/index.cjs:521:52069
2026-02-17T13:28:27.2926568Z     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
2026-02-17T13:28:27.3013448Z
2026-02-17T13:28:27.301489Z Node.js v22.22.0